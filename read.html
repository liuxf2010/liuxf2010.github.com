<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Read Word</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" >
  <meta name="renderer" content="webkit">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <script src="https://unpkg.com/vue@3.5.22/dist/vue.global.js"></script>
  <script src="https://unpkg.com/naive-ui@2.42.0/dist/index.prod.js"></script>
  <style type="text/css">
    html { color: rgba(255, 255, 245, 0.86); }
    body { background: #1b1b1f; }
    #app { padding: 12px; }
    #audio { height: 30px; }
    .flex { width: 200px; }
    .textarea { min-height: 300px; height: 100%; }
    .wrapper-grid { display: flex; flex-direction: row; gap: 12px; }
    .item-grid { flex: 1; }
    .n-list .n-list-item { padding-left: 8px; }
    @media (max-width: 1000px) {
      .wrapper-grid { flex-direction: column; }
    }
  </style>
</head>
<body>
<div id="app">
  <n-config-provider :theme="darkTheme" :locale="zhCN" :date-locale="dateZhCN">
    <n-space vertical :size="12">
      <n-flex align="center">
        <n-switch :rail-style="railStyle" checked-value="1" unchecked-value="0" v-model:value="langType">
          <template #checked>英式</template>
          <template #unchecked>美式</template>
        </n-switch>
        <n-switch :rail-style="railStyle" checked-value="1" unchecked-value="0" v-model:value="voiceType">
          <template #checked>有道声源</template>
          <template #unchecked>本地语音</template>
        </n-switch>
        <audio id="audio" controls="controls"></audio>
        <n-select v-model:value="selectValue" :options="selectOptions" @update:value="handleSelectValue" class="flex" placeholder="请选择"></n-select>
        <n-switch :rail-style="railStyle" checked-value="1" unchecked-value="0" v-model:value="sortType">
          <template #checked>顺序</template>
          <template #unchecked>随机</template>
        </n-switch>
      </n-flex>
      <div class="wrapper-grid">
        <div class="item-grid">
          <n-input v-model:value="inputValue" type="textarea" placeholder="请输入" class="textarea" />
        </div>
        <div class="item-grid">
          <n-list clickable>
            <n-list-item v-for="(item, index) in wordList" :key="index" @click="handlePlay(index)">{{ item.label }}</n-list-item>
          </n-list>
        </div>
      </div>
    </n-space>
  </n-config-provider>
</div>
<script>
const word_list_data = [
"2025-8-3 listen|听 sound|声音 speak|说话 write|写 answer|回答 question|问题 trousers|裤子 hurt|受伤 hospital|医院 table|表 nurse|护士 well|健康的 holiday|节日 travel|旅游 fly|飞行",
"2025-8-4 room|房间 sea|海洋 beach|海滩 map|地图 place|地方 visit|参观 hurry|匆忙 buy|购买 shop|商店 sell|出售 gift|礼物 picture|照片 wonderful|极好的 famous|著名的 welcome|欢迎",
"2025-8-5 fast|快的 slow|慢的 stop|车站 park|公园 safe|安全的 free|自由的 city|城市 money|货币 science|科学 internet|因特网 phone|电话 email|电子邮件 robot|机器人 wire|电线 hill|山丘",
"2025-8-6 water|水 river|河 lake|湖 air|空气 weather|天气 sun|太阳 sunny|晴朗的 cloudy|多云的 windy|有风的 rain|雨 ice|冰 warm|温暖的 hot|热的 pet|宠物 animal|动物",
"2025-8-7 cat|猫 dog|狗 bird|鸟 tiger|虎 panda|熊猫 monkey|猴 lion|狮 elephant|象 zoo|动物园 fish|鱼 farm|农场 sleep|羊 rabbit|兔 pig|猪 horse|马",
"2025-8-8 cow|奶牛 duck|鸭 tail|尾巴 plant|种植 flower|花 grass|草 tree|树 field|田 dirty|脏的 clean|打扫 tidy|整理 earth|地球 fire|火;开枪 astronaut|宇航员 space|空间 star|星",
"2025-9-3 suppose|想 birthmark|胎记 bright|鲜艳的 strawberry|草莓 crowded|拥挤的",
"2025-9-4 disaster|灾难 therefore|因此 cover|遮盖 instead|代替 instead of|代替... although|虽然 bathroom|浴室 quickly|马上 truly|真实地 paint|画",
"2025-9-6 yet|还 anyway|总之 already|已经 difference|差异 hate|讨厌 successful|有成就的 scientific|科学的 wise|明智的 present|现在完成时 row|一排",
"2025-9-7 height|身高 literature|文学 character|人物 brain|脑 value|价值观 quality|素质 impossible|不可能的 nothing|没有任何东西 actress|女演员 silver|银质的",
"2025-9-17 condition|长期疾病 cost|花费 lend|借出 lend somebody a hand|帮助某人做事 3-D|三维 printer|打印机 invent|发明 weigh|重量",
"2025-9-21 kilogram|千克 fix|解决 invention|发明 download|下载 apply|应用 blind|盲的 machine|机器 warn|警告 object|物体",
]
</script>
<script>
function playWordByAudio({ type, word }) {
  let audio = document.getElementById("audio")
  audio.src = `//dict.youdao.com/dictvoice?type=${type}&audio=${word}`
  audio.play()
}
function playWordByUtterance({ type, word }) {
  let lang = type == "1" ? "en-GB" : "en-US"
  let data = new SpeechSynthesisUtterance()
  data.text = word
  data.lang = lang
  data.rate = 1
  data.onend = () => {}
  speechSynthesis.speak(data)
}
function setup(props, ctx) {
  const zhCN = naive.zhCN
  const dateZhCN = naive.dateZhCN
  const darkTheme = naive.darkTheme
  const railStyle = ({ focused, checked }) => {
    let style = {}
    if(checked) {
      style.background = "#d03050"
      if (focused) {
        style.boxShadow = "0 0 0 2px #d0305040"
      }
    } else {
      style.background = "#2080f0"
      if (focused) {
        style.boxShadow = "0 0 0 2px #2080f040"
      }
    }
    return style
  }
  const langType = Vue.ref("1")
  const voiceType = Vue.ref("1")
  const sortType = Vue.ref("1")
  const inputValue = Vue.ref("")
  const selectValue = Vue.ref(null)
  const selectOptions = Vue.ref([])
  const handleSelectValue = index => {
    let text = word_list_data[index]
    if(text) {
      inputValue.value = text.split(" ").slice(1).join("\r\n")
    }
  }
  const wordListFormat = (word, index) => {
    if(word.indexOf("|") > 0) {
      let [wd, title] = word.split("|")
      let label = word.replace("|", " # ")
      return { word: wd, title, label: `${index+1}. ${label}`, index }
    }
    return { word, label: `${index+1}. ${word}`, index }
  }
  const wordList = Vue.computed(() => {
    let list = inputValue.value.split(/[\r\n]+/g)
    if(sortType.value == "1") {
      return list.map(wordListFormat)
    } else {
      return list.sort(() => Math.random() - 0.5).map(wordListFormat)
    }
  })
  const playWord = word => {
    let type = langType.value
    if(voiceType.value == 1) {
      playWordByAudio({ word, type })
    } else {
      playWordByUtterance({ word, type })
    }
  }
  const handlePlay = (index) => {
    let { word } = wordList.value[index]
    playWord(word)
  }
  const onMountedCallback = () => {
    selectOptions.value = word_list_data.map((text, index) => {
      let label = text.split(" ")[0]
      return { label, value: index }
    })
  }
  Vue.onMounted(onMountedCallback)
  return {
    zhCN,
    dateZhCN,
    darkTheme,
    railStyle,
    langType,
    voiceType,
    sortType,
    inputValue,
    selectValue,
    selectOptions,
    handleSelectValue,
    wordList,
    handlePlay
  }
}
const App = {
  setup
}
const app = Vue.createApp(App)
app.use(naive)
app.mount('#app')
</script>
</body>
</html>